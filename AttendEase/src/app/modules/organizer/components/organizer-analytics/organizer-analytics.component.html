<div class="relative w-full h-screen">
  <div class="relative">
    <button
      (click)="toggleDropdown()"
      class="inline-flex z-30 my-1.5 relative items-center text-white bg-light-background border focus:outline-none hover:bg-light-foregroud focus:ring-0 font-medium rounded-md text-sm px-3 py-1.5"
      type="button"
    >
      <span class="sr-only">Select Event</span>
      Select Event
      <svg
        class="w-2.5 h-2.5 ms-2.5"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 10 6"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="m1 1 4 4 4-4"
        />
      </svg>
    </button>

    <!-- Dropdown menu -->
    <div
      class="hidden bg-white divide-y divide-gray-100 border border-dark-border rounded-lg shadow dark:bg-gray-700 absolute z-40 left-0"
      [class.hidden]="!dropdownOpen"
    >
      <ul
        class="absolute left-0 -top-0.5 bg-white border border-dark-border rounded-md divide-y divide-gray-300"
      >
        <li
          *ngFor="let event of report"
          (click)="selectEvent(event)"
          class="block px-4 py-2 text-sm font-medium capitalize hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white cursor-pointer"
        >
          {{ event.event_name }}
        </li>
      </ul>
    </div>

    <div
      class="flex max-h-[400px] h-[400px] w-[calc(100%-320px)] gap-2 mb-2"
      *ngIf="selectedEvent"
    >
      <div
        class="w-2/3 h-full border border-dark-border bg-white rounded-md shadow-md p-4"
      >
        <div class="w-full h-full">
          <p-chart
            type="line"
            [data]="lineChartData"
            [options]="lineChartOptions"
          ></p-chart>
        </div>
      </div>

      <div class="w-1/3 h-full">
        <app-organizer-calendar></app-organizer-calendar>
      </div>

      <!-- eventlisting -->
    </div>
    <div class="pb-5 flex w-[calc(100%-320px)] gap-2">
      <div class="w-1/3">
        <app-activitylogs></app-activitylogs>
      </div>
      <div class="w-[calc(100%-400px)]">
        <app-ongoing-report></app-ongoing-report>
      </div>
    </div>
  </div>

  <aside
    class="fixed top-0 right-0 z-40 border-l bg-white border-dark-border w-80 h-screen"
  >
    <div class="h-full mt-16 px-3 py-4 overflow-y-auto dark:bg-gray-800">
      <h5 class="text-base font-medium mb-2 text-gray-900 dark:text-white">
        Event Listing
      </h5>

      <ul class="space-y-2 font-medium mb-20">
        <li *ngFor="let event of events">
          <div
            class="block w-full p-3 bg-white border border-gray-200 rounded-md shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"
          >
            <h5
              class="mb-2 text-base font-bold tracking-tight text-gray-900 dark:text-white"
            >
              {{ event.event_name }}
            </h5>
            <div class="flex justify-between">
              <p class="inline-flex font-normal text-xs text-gray-700">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-map-pin"
                >
                  <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" />
                  <circle cx="12" cy="10" r="3" />
                </svg>
                {{ event.event_location }}
              </p>

              <p class="inline-flex text-xs">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-calendar"
                >
                  <path d="M8 2v4" />
                  <path d="M16 2v4" />
                  <rect width="18" height="18" x="3" y="4" rx="2" />
                  <path d="M3 10h18" /></svg
                >{{ event.event_start_date | date : "MMM dd" }}
              </p>
            </div>
            <span class="font-normal text-xs text-gray-700">
              Registered Students:
              {{ event.registered_users_data?.length || 0 }}
            </span>
          </div>
        </li>
      </ul>
    </div>
  </aside>
</div>
