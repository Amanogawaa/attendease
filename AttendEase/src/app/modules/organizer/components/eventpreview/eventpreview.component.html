<main class="w-full">
  <div class="p-4 mt-16 sm:ml-64">
    <button class="-ms-2" (click)="closePage()">
      <svg
        class="w-7 h-7 text-gray-800 dark:text-white"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="none"
        viewBox="0 0 24 24"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1"
          d="M5 12h14M5 12l4-4m-4 4 4 4"
        />
      </svg>
    </button>

    <section class="bg-white w-full relative">
      <div
        class="max-w-full bg-white border border-dark-border rounded-md overflow-hidden"
      >
        <div *ngFor="let event of events" class="absolute -top-3 right-0">
          <span
            class="bg-white capitalize text-gray-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded me-2 border border-dark-border"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-loader inline-flex flex-shrink-0 me-1"
            >
              <path d="M12 2v4" />
              <path d="m16.2 7.8 2.9-2.9" />
              <path d="M18 12h4" />
              <path d="m16.2 16.2 2.9 2.9" />
              <path d="M12 18v4" />
              <path d="m4.9 19.1 2.9-2.9" />
              <path d="M2 12h4" />
              <path d="m4.9 4.9 2.9 2.9" />
            </svg>
            {{ event.status }}
          </span>
        </div>
        <div
          *ngFor="let event of events"
          class="md:p-3.5 max-sm:p-2 rounded-md flex flex-col w-full items-center relative"
        >
          <div class="md:p-5 max-sm:p-3 w-full items-center">
            <div
              class="mb-3 flex flex-col items-center md:flex-row w-full gap-3"
            >
              <div
                class="rounded-md max-h-[304px] md:w-1/2 w-full flex-shrink-0 relative"
              >
                <img
                  *ngIf="event.event_image$ | async; else placeholder"
                  [src]="event.event_image$ | async"
                  alt="fetch images"
                  loading="lazy"
                  class="rounded-md object-cover max-h-[304px] h-full object-center w-full flex-grow border border-dark-border"
                />
                <ng-template #placeholder>
                  <div>
                    <img
                      src="./../../../../../assets/images/event_placeholder.jpg"
                      alt=""
                      class="rounded-md object-cover max-h-[304px] h-full object-center w-full flex-grow border border-dark-border"
                    />
                  </div>
                </ng-template>
                <button
                  (click)="openFile(event.event_id)"
                  class="absolute z-30 inset-0 flex items-center justify-center text-light-text bg-opacity-50 bg-dark-foreground hover:bg-opacity-55"
                >
                  <svg
                    class="w-6 h-6 text-light-text hover:text-white"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1"
                      d="m3 16 5-7 6 6.5m6.5 2.5L16 13l-4.286 6M14 10h.01M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"
                    />
                  </svg>
                </button>
              </div>
              <div class="md:w-1/2 w-full flex flex-col">
                <h1 class="text-ellipsis text-text text-4xl font-bold">
                  {{ event?.event_name }}
                </h1>
                <span
                  class="text-light-text text-xs font-semibold relative top-1"
                  >by: {{ event?.first_name }} {{ event?.last_name }} |
                  {{ event.organizer_organization | uppercase }}</span
                >
                <p
                  class="leading-normal text-sm flex-grow text-justify overflow-hidden whitespace-pre-line text-ellipsis text-text"
                >
                  {{ event?.event_description }}
                </p>
              </div>
            </div>
            <hr class="h-px my-5 bg-gray-200 border-0 dark:bg-gray-700" />

            <!-- details -->
            <div>
              <ol class="relative border-s border-light-border">
                <li class="mb-5 ms-4">
                  <span
                    class="absolute flex items-center justify-center w-6 h-6 bg-light-background rounded-full -start-3"
                  >
                    <svg
                      class="w-[16px] h-[16px] text-white"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1"
                        d="M4 10h16m-8-3V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Zm3-7h.01v.01H8V13Zm4 0h.01v.01H12V13Zm4 0h.01v.01H16V13Zm-8 4h.01v.01H8V17Zm4 0h.01v.01H12V17Zm4 0h.01v.01H16V17Z"
                      />
                    </svg>
                  </span>

                  <p
                    class="text-sm ms-1 font-normal leading-none text-text dark:text-gray-500"
                  >
                    Start Date:
                  </p>
                  <h3 class="text-sm ms-1 font-semibold text-gray-900">
                    {{ event?.event_start_date | date : "MMM d, y, h:mm a" }}
                    -
                    {{ event?.event_end_date | date : "MMM d, y, h:mm a" }}
                  </h3>
                </li>
                <li class="mb-5 ms-4">
                  <span
                    class="absolute flex items-center justify-center w-6 h-6 bg-light-background rounded-full -start-3"
                  >
                    <svg
                      class="w-[16px] h-[16px] text-white"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1"
                        d="M4 10h16M8 14h8m-4-7V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"
                      />
                    </svg>
                  </span>
                  <p
                    class="mb-1 text-sm ms-1 font-normal leading-none text-text dark:text-gray-500"
                  >
                    Registration Date:
                  </p>
                  <h3 class="text-sm ms-1 font-semibold text-gray-900">
                    {{
                      event?.event_registration_start
                        | date : "MMM d, y, h:mm a"
                    }}
                    -
                    {{
                      event?.event_registration_end | date : "MMM d, y, h:mm a"
                    }}
                  </h3>
                </li>
                <li class="mb-5 ms-4">
                  <span
                    class="absolute flex items-center justify-center w-6 h-6 bg-light-background rounded-full -start-3"
                  >
                    <svg
                      class="w-4 h-4 text-white"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1"
                        d="M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
                      />
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1"
                        d="M17.8 13.938h-.011a7 7 0 1 0-11.464.144h-.016l.14.171c.1.127.2.251.3.371L12 21l5.13-6.248c.194-.209.374-.429.54-.659l.13-.155Z"
                      />
                    </svg>
                  </span>
                  <p
                    class="mb-1 text-sm ms-1 font-normal leading-none text-text dark:text-gray-500"
                  >
                    Location:
                  </p>
                  <h3
                    class="text-sm ms-1 capitalize font-semibold text-gray-900"
                  >
                    {{ event?.event_location }}
                  </h3>
                </li>
                <li class="mb-5 ms-4">
                  <span
                    class="absolute flex items-center justify-center w-6 h-6 bg-light-background rounded-full -start-3"
                  >
                    <svg
                      class="w-[16px] h-[16px] text-white"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1"
                        d="m11.5 11.5 2.071 1.994M4 10h5m11 0h-1.5M12 7V4M7 7V4m10 3V4m-7 13H8v-2l5.227-5.292a1.46 1.46 0 0 1 2.065 2.065L10 17Zm-5 3h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"
                      />
                    </svg>
                  </span>
                  <p
                    class="mb-1 text-sm ms-1 capitalize font-normal leading-none text-text dark:text-gray-500"
                  >
                    Event Type:
                  </p>
                  <h3
                    class="text-sm ms-1 capitalize font-semibold text-gray-900"
                  >
                    {{ event?.event_type }}
                  </h3>
                </li>
                <li class="mb-5 ms-4">
                  <span
                    class="absolute flex items-center justify-center w-6 h-6 bg-light-background rounded-full -start-3"
                  >
                    <svg
                      class="w-[16px] h-[16px] text-white"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-width="1"
                        d="M4.5 17H4a1 1 0 0 1-1-1 3 3 0 0 1 3-3h1m0-3.05A2.5 2.5 0 1 1 9 5.5M19.5 17h.5a1 1 0 0 0 1-1 3 3 0 0 0-3-3h-1m0-3.05a2.5 2.5 0 1 0-2-4.45m.5 13.5h-7a1 1 0 0 1-1-1 3 3 0 0 1 3-3h3a3 3 0 0 1 3 3 1 1 0 0 1-1 1Zm-1-9.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z"
                      />
                    </svg>
                  </span>
                  <p
                    class="mb-1 text-sm ms-1 font-normal leading-none text-text dark:text-gray-500"
                  >
                    Max Participants:
                  </p>
                  <h3 class="text-sm ms-1 font-semibold text-gray-900">
                    {{ event?.max_attendees }}
                  </h3>
                </li>
                <li class="mb-5 ms-4 flex items-center">
                  <span
                    class="absolute flex items-center justify-center w-6 h-6 bg-light-background rounded-full -start-3"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="white"
                      stroke-width="1"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-target"
                    >
                      <circle cx="12" cy="12" r="10" />
                      <circle cx="12" cy="12" r="6" />
                      <circle cx="12" cy="12" r="2" />
                    </svg>
                  </span>
                  <p class="" *ngIf="event?.participation_type === 'open'">
                    <span class="text-sm font-medium text-text"
                      >Open for All</span
                    >
                  </p>
                  <p
                    *ngIf="event?.participation_type === 'selected'"
                    class="text-sm"
                  >
                    Open for:
                    <span>{{
                      getFormattedTargetParticipants(event.target_participants)
                    }}</span>
                  </p>
                </li>
                <li class="mb-5 ms-4 flex items-center gap-1">
                  <p
                    *ngFor="let tag of event.categories"
                    class="relative mb-1 text-sm font-normal flex leading-none text-text dark:text-gray-500"
                  >
                    <span
                      class="bg-green-100 flex items-center text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full capitalize"
                    >
                      {{ tag.display }}
                    </span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="15"
                      height="15"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-tag absolute -right-2 -bottom-1.5"
                    >
                      <path
                        d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"
                      />
                      <circle cx="7.5" cy="7.5" r=".5" fill="currentColor" />
                    </svg>
                  </p>
                </li>
              </ol>
            </div>
            <!-- Footer Section -->
            <div
              class="flex items-center justify-end relative p-4 md:p-5 border-t border-gray-200 rounded-b"
            >
              <button
                (click)="openDialog(event.event_id)"
                type="button"
                aria-expanded="false"
                class="inline-flex py-2 px-5 items-center justify-center text-white bg-light-background border border-light-border hover:bg-light-foregroud rounded-md focus:outline-none shadow-md"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-pencil me-1"
                >
                  <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" />
                  <path d="m15 5 4 4" /></svg
                >Edit Event
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>
